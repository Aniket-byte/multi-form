<div class="p-4">
  <mat-card class="bg-light p-md-4">
    <h1>Internships</h1>
    <mat-card-content>
      <form [formGroup]="formGrp" (ngSubmit)="onSubmit('internship')">
        <div formGroupName="internship">
          <mat-form-field style="width: 100%">
            <input
              [errorStateMatcher]="matcher"
              matInput
              formControlName="company"
              placeholder="Organization name"
            />
            <mat-error
              *ngIf="
                this.formGrp.get('internship.company').hasError('required')
              "
              >This field is required</mat-error
            >
          </mat-form-field>

          <mat-form-field style="width: 100%">
            <input
              matInput
              formControlName="yoe"
              placeholder="Time duration of internship"
              [errorStateMatcher]="matcher"
            />
            <mat-hint align="end">in months</mat-hint>
            <mat-error
              *ngIf="this.formGrp.get('internship.yoe').hasError('required')"
              >This field is required</mat-error
            >
            <mat-error
              *ngIf="this.formGrp.get('internship.yoe').hasError('max')"
              >Not a valid value</mat-error
            >
          </mat-form-field>
          <mat-form-field style="width: 100%">
            <input
              matInput
              formControlName="position"
              placeholder="Position in the organization"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                this.formGrp.get('internship.position').hasError('required')
              "
              >This field is required</mat-error
            >
          </mat-form-field>
          <mat-form-field style="width: 100%">
            <textarea
              style="height: 100px"
              matInput
              formControlName="desc"
              placeholder="description"
              [errorStateMatcher]="matcher"
            ></textarea>
            <mat-hint align="end">Max. 250 characters</mat-hint>
            <mat-error
              *ngIf="this.formGrp.get('internship.desc').hasError('required')"
              >This field is required</mat-error
            >
            <mat-error
              *ngIf="this.formGrp.get('internship.desc').hasError('maxlength')"
              >More than 250 characters</mat-error
            >
          </mat-form-field>
        </div>
        <button
          mat-raised-button
          color="primary"
          [disabled]="formGrp.invalid"
          class="mt-1"
        >
          Add
        </button>
      </form>
    </mat-card-content>
    <ng-container *ngIf="internships.length > 0; else noIntern">
      <mat-card class="m-2" *ngFor="let item of internships; let i = index">
        <div class="d-flex justify-content-between">
          <mat-card-title>{{ item.company }}</mat-card-title>
          <button
            class="btn-close"
            (click)="onDelete('internships', i)"
          ></button>
        </div>

        <mat-card-content>
          <div class="d-flex">
            <mat-card-subtitle class="mb-0"
              >Duration of internship :
            </mat-card-subtitle>
            <div class="text-primary">{{ item.yearOfWork }} month(s)</div>
          </div>
          <div class="d-flex">
            <mat-card-subtitle class="mb-0"
              >Position in the organization :
            </mat-card-subtitle>
            <div class="text-primary">{{ item.position }}</div>
          </div>
          <div class="d-flex">
            <mat-card-subtitle class="mb-0">Description : </mat-card-subtitle>
            <div class="text-primary">{{ item.description }}</div>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-container>
    <ng-template #noIntern>
      <div class="text-center">No Internships added</div>
    </ng-template>
  </mat-card>
  <mat-card class="bg-light p-md-4 mt-4">
    <h1>Projects</h1>
    <mat-card-content>
      <form [formGroup]="formGrp2" (ngSubmit)="onSubmit('project')">
        <div formGroupName="project">
          <mat-form-field style="width: 100%">
            <input
              [errorStateMatcher]="matcher"
              matInput
              formControlName="name"
              placeholder="Name of the project"
            />
            <mat-error
              *ngIf="this.formGrp2.get('project.name').hasError('required')"
              >This field is required</mat-error
            >
          </mat-form-field>

          <mat-form-field style="width: 100%">
            <input
              matInput
              formControlName="mentor"
              placeholder="Name of the mentor"
              [errorStateMatcher]="matcher"
            />
            <mat-hint align="end">( If none then self. )</mat-hint>
            <mat-error
              *ngIf="this.formGrp2.get('project.mentor').hasError('required')"
              >This field is required</mat-error
            >
          </mat-form-field>
          <mat-form-field style="width: 100%">
            <input
              matInput
              formControlName="members"
              placeholder="Number of members in the project"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="this.formGrp2.get('project.members').hasError('required')"
              >This field is required</mat-error
            >
          </mat-form-field>
          <mat-form-field style="width: 100%">
            <textarea
              style="height: 100px"
              matInput
              formControlName="desc"
              placeholder="description"
              [errorStateMatcher]="matcher"
            ></textarea>
            <mat-hint align="end">Max. 250 characters</mat-hint>
            <mat-error
              *ngIf="this.formGrp2.get('project.desc').hasError('required')"
              >This field is required</mat-error
            >
            <mat-error
              *ngIf="this.formGrp2.get('project.desc').hasError('maxlength')"
              >More than 250 characters</mat-error
            >
          </mat-form-field>
        </div>
        <button
          mat-raised-button
          color="primary"
          [disabled]="formGrp2.invalid"
          class="mt-1"
        >
          Add
        </button>
      </form>
    </mat-card-content>
    <ng-container *ngIf="projects.length > 0; else noProject">
      <mat-card class="m-2" *ngFor="let item of projects; let i = index">
        <div class="d-flex justify-content-between">
          <mat-card-title>
            {{ item.name }}
          </mat-card-title>
          <button class="btn-close" (click)="onDelete('projects', i)"></button>
        </div>

        <mat-card-content>
          <div class="d-flex">
            <mat-card-subtitle class="mb-0">Mentor's name : </mat-card-subtitle>
            <div class="text-primary">{{ item.mentor }}</div>
          </div>
          <div class="d-flex">
            <mat-card-subtitle class="mb-0"
              >No. of members :
            </mat-card-subtitle>
            <div class="text-primary">{{ item.members }}</div>
          </div>
          <div class="d-flex">
            <mat-card-subtitle class="mb-0">Description : </mat-card-subtitle>
            <div class="text-primary">{{ item.description }}</div>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-container>
    <ng-template #noProject>
      <div class="text-center">No Projects added</div>
    </ng-template>
  </mat-card>
  <div class="mt-3 text-center">
    <button (click)="onSave()" mat-raised-button color="warn">
      {{ projects.length > 0 || internships.length > 0 ? "Save" : "Skip" }}
    </button>
  </div>
</div>
